---
layout: post
title:  "vim shortcuts"
subtitle: "vim常用的快捷鍵"
tags: ["vim", "shortcuts"]
---



vim（**V**i **IM**proved）是從vi延伸的一個開源的文字編輯器，他有許多方便程式開發的功能，他也是類unix系統中常用的編輯器。Vim的第一個版本是在1991年發布。

## vim的特點

* 主記憶體佔用數量（memory footprint）很低
* 只需執行幾個命令即可執行與文本相關的複雜任務
* 可使用簡易的文件（.vimrc）來配置
* 有許多的套件（plug in）可擴展其功能
* 支援多個視窗
* 支援記錄功能，可重複紀錄、執行指令

## 為何要學vim

* 所有的unix like系統都內建vi文書編輯器
* 許多個別軟體的編輯界面都會主動呼叫vi，例如git
* vim具有程式編輯的能力，可以主動以字體顏色辨別語法正確性，方便程式設計
* 程式簡單，編輯速度相當快速
  可將vim視為vi的進階版本，vim可用顏色或底線等方式來顯示一些特殊資訊
## vi的使用
vi分為三種模式，分別是**一般指令模式**、**編輯模式**、**指令列命令模式**，需注意：編輯模式與指令列模式之間不可互相切換的
* 一般指令模式（command mode）
  使用 vim 開啟一個檔案時，預設就直接進入一般指令模式了。在此模式中，可作以下操作
  
  * 使用『上下左右』按鍵來移動游標
  * 使用『刪除字元』或『刪除整列』來處理檔案內容
  * 使用『複製、貼上』處理文件資料。在一般指令模式中可以進行刪除、複製、貼上等等的動作，但是無法編輯文件內容
  
* 編輯模式（insert mode）
  按下『i, I, o, O, a, A, r, R』等任何一個字母之後會進入編輯模式。
  
  通常在 Linux 中按下這些按鍵時，在畫面的左下方會出現『 INSERT 或 REPLACE 』的字樣，此時才可以進行編輯。而如果要回到一般指令模式時， 按下『Esc』這個按鍵即可退出編輯模式。
  
* 指令列命令模式（command-line mode）
  輸入『 : / ? 』三個中的任何一個按鈕，就可以將游標移動到最底下那一列。在這個模式當中， 可以做『搜尋資料』的動作，以及讀取、存檔、大量取代字元、離開 vi 、顯示行號等等的動作
  
  另外如果檔案權限不對，例如為 -r—r—r— 時，那麼可能會無法寫入，此時可以使用『強制寫入』的方式，使用『 :wq! 』 多加一個驚嘆號即可！不過，需要特別注意！那個是在『你的權限可以改變』的情況下才能成立的！
## vi按鍵說明
以下介紹各個指令使用，標示為粗體字表示我較常用的指令

### 一般指令模式

#### 移動游標

* **h 或 向左方向鍵(←)**

  **游標向左移動一個字元**

* **j 或 向下方向鍵(↓)**
  **游標向下移動一個字元**
* **k 或 向上方向鍵(↑)**
  **游標向上移動一個字元**
* **l 或 向右方向鍵(→)**
  **游標向右移動一個字元**

可以使用這四個按鈕來移動游標。如果想要進行多次移動的話，可加上想要移動的次數，並按下方向即可。
例如向下移動 30 列，可以使用`30j`或`30↓`的組合按鍵

 * **[Ctrl]+[f]**
    **螢幕『向下』移動一頁，相當於 [Page Down]按鍵**
* **[Ctrl]+[b]**
  **螢幕『向上』移動一頁，相當於 [Page Up] 按鍵**
* [Ctrl] + [d]
  螢幕『向下』移動半頁
* [Ctrl] + [u]
  螢幕『向上』移動半頁
* +
  游標移動到非空白字元的下一列
* -
  游標移動到非空白字元的上一列
* **n<space>**
  **n 表示『數字』，游標會向右移動 n 個字元。例如 20<space> 表示游標向後面移動 20 個字元**
* **n<enter>**
  **n 表示『數字』，游標會向下移動 n 個列，例如20<enter>，游標會向下移動20列**
* **0 或功能鍵[Home]**
  **移動到這一列的最前面字元處**
* **$ 或功能鍵[End]**
  **移動到這一列的最後面字元處**
* H
  游標移動到這個螢幕的最上方那一列的第一個字元
* M
  游標移動到這個螢幕的中央那一列的第一個字元
* L
  游標移動到這個螢幕的最下方那一列的第一個字元
* **G**
  **游標移動到這個檔案的最後一列**
* **nG**
  **n 表示『數字』，游標移動到這個檔案的第 n 列。例如 20G 會移動到這個檔案的第 20 列**
* **gg**
  **移動到這個檔案的第一列（等於`1G`）**

#### **搜尋與取代**
* **/word**
  **向游標之下尋找一個名稱為 word 的字串。例如要在檔案內搜尋 abc 的字串，就輸入 /abc 即可**
* ?word
  向游標之上尋找一個字串名稱為 word 的字串。
* **n**
  **代表『重複前一個搜尋的動作』。舉例來說， 如果剛剛我們執行 /abc去向下搜尋 abc這個字串，則按下 n 後，會向下繼續搜尋下一個名稱為 abc的字串。如果是執行 ?abc的話，那麼按下 n 則會向上繼續搜尋名稱為 abc的字串！**
* **N**
  **與 n 剛好相反，為『反向』進行前一個搜尋動作。 例如 /abc後，按下 N 則表示『向上』搜尋 abc。**

* **:n1,n2s/word1/word2/g**
  **從第n1與n2列之間尋找 word1 字串，並將該字串取代為 word2。例如在 100 到 200 列之間搜尋 abc並取代為 ABC，則：『:100,200s/abc/ABC/g』。**
* **:1,$s/word1/word2/g**
  **從第一列到最後一列搜尋 word1 字串，並將該字串取代為 word2。例如從第一列到最後一列之間搜尋 abc並取代為 ABC，則：『:1$s/abc/ABC/g』。**
* **:1,$s/word1/word2/gc**
  **從第一列到最後一列尋找 word1 字串，並將該字串取代為 word2。在取代前顯示提示字元給使用者確認 (confirm) 是否需要取代**

#### **刪除、複製、貼上**
* **x, X**
  **在一列字當中，x 為向後刪除一個字元 (相當於 [del] 按鍵)， X 為向前刪除一個字元(相當於 [backspace] 按鍵)**
  
* nx
  N 為數字，連續向後刪除 n 個字元。例如連續刪除 10 個字元，需輸入『10x』。
  
* **dd**
  **刪除游標所在的那一整列**
  
* **ndd**
  **n 為數字。刪除游標所在的向下 n 列，例如 20dd 則是刪除 20 列**
  
* d1G
  刪除游標所在到第一列的所有資料
  
* dG
  刪除游標所在到最後一列的所有資料
  
* **d$**
  **刪除游標所在處，到該列的最後一個字元**
  
* **d0**
  **那個是數字的 0 ，刪除游標所在處，到該列的最前面一個字元**
  
* **yy**
  **複製游標所在的那一列**
  
* **nyy**
  **n 為數字。複製游標所在的向下 n 列，例如 20yy 則是複製 20 列**
  
* y1G
  複製游標所在列到第一列的所有資料
  
* yG
  複製游標所在列到最後一列的所有資料
  
* y0
  複製游標所在的那個字元到該列行首的所有資料
  
* y$
  複製游標所在的那個字元到該列行尾的所有資料
  
* **p**
  **將已複製的資料在游標下一列貼上。例如目前游標在第 20 列，且已經複製了 10 列資料。按下 p 後， 複製的10 列資料會貼在原本的 20 列之後，亦即由 21 列開始貼。**
  
* **P**
  
  **將已複製的資料在游標上一列貼上。例如目前游標在第 20 列，且已經複製了 10 列資料。按下 P 後， 複製的10 列資料會貼在原本的 20 列之前，亦即由 20 列開始貼，原本的第 20 列會被推到變成 30 列。**
  
* J
  將游標所在列與下一列的資料結合成同一列
  
* c
  重複刪除多個資料，例如向下刪除 10 列，[ 10cj ]
  
* **u**
  **復原前一個動作**
  
* **[Ctrl]+r**
  **重做上一個動作**
  
* **.**
  **小數點，表示重複前一個動作。 如果你想要重複刪除、重複貼上等等動作，就按下小數點『.』**

### 一般指令模式切換到編輯模式
* **i, I**
  **進入插入模式（Insert mode）：i 為『從目前游標所在處插入』， I 為『在目前所在列的第一個非空白字元處開始插入』**
* **a, A**
  **進入插入模式（Insert mode）：a 為『從目前游標所在的下一個字元處開始插入』， A 為『從游標所在列的最後一個字元處開始插入』**
* **o, O**
  **進入插入模式(Insert mode)：o 為『在目前游標所在的下一列處插入新的一列』； O 為在目前游標所在處的上一列插入新的一列**
* **r, R**
  **進入取代模式(Replace mode)：r 只會取代游標所在的那一個字元一次；R會一直取代游標所在的文字，直到按下 ESC 為止**
* **[Esc]**
  **退出編輯模式，回到一般指令模式中(常用)**

### 指令列模式
#### 儲存、離開等指令
* **:w**
  **將編輯的資料寫入硬碟檔案中(常用)**
* **:w!**
  **若檔案屬性為『唯讀』時，強制寫入該檔案。不過還需跟該檔案的檔案權限有關**
* **:q**
  **離開 vi**
* **:q!**
  **若曾修改過檔案，又不想儲存，使用 ! 為強制離開不儲存檔案。**

驚嘆號 (!) 在 vi 當中，常常具有『強制』的意思

* **:wq**
  **儲存後離開，若為 :wq! 則為強制儲存後離開**
 * ZZ
    這是大寫的 Z 。若檔案沒有更動，則不儲存離開，若檔案已經被更動過，則儲存後離開！
* :w [filename]
  將編輯的資料儲存成另一個檔案（類似另存新檔）
* :r [filename]
  在編輯的資料中，讀入另一個檔案的資料。亦即將 『filename』 這個檔案內容加到游標所在列後面
* :n1,n2 w [filename]
  將 n1 到 n2 的內容儲存成 filename 這個檔案。
* :! command
  暫時離開 vi 到指令列模式下執行 command 的顯示結果！例如『:! ls /home』即可在 vi 當中察看 /home 底下以 ls 輸出的檔案資訊！

#### **vim 環境的變更**
* **:set nu**
  **顯示行號，設定之後，會在每一列的字首顯示該列的行號**
* :set nonu
  與 set nu 相反，為取消行號

## Reference

* [鳥哥的 Linux 私房菜 -- 第九章、vim 程式編輯器](http://linux.vbird.org/linux_basic/0310vi.php)
* [Vim - Introduction](https://www.tutorialspoint.com/vim/vim_introduction.htm)